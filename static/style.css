/* ========================================
   늘봄 AI - 스타일시트
   브랜드 컬러: 보미 캐릭터 기반
   ======================================== */

/* ===== CSS 변수 (보미 캐릭터 컬러 추출) ===== */
:root {
    /* 메인 브랜드 컬러 - 보미에서 추출 */
    --main-color: #7CB342;           /* 보미 잎사귀 초록 */
    --main-color-light: #AED581;
    --main-color-dark: #558B2F;
    --secondary-color: #FFB74D;      /* 보미 노란 몸통 */
    --secondary-light: #FFE082;
    --accent-color: #8BC34A;         /* 연한 초록 */
    
    /* 배경색 */
    --bg-cream: #FFFEF7;
    --bg-soft: #FFF8E1;
    --bg-card: #FFFFFF;
    
    /* 텍스트 색상 */
    --text-primary: #3E2723;
    --text-secondary: #5D4037;
    --text-muted: #8D6E63;
    --text-light: #A1887F;
    
    /* 상태 색상 */
    --success: #66BB6A;
    --warning: #FFA726;
    --danger: #EF5350;
    --info: #42A5F5;
    
    /* 그림자 */
    --shadow-sm: 0 2px 8px rgba(62, 39, 35, 0.08);
    --shadow-md: 0 4px 16px rgba(62, 39, 35, 0.12);
    --shadow-lg: 0 8px 32px rgba(62, 39, 35, 0.16);
    
    /* 레이아웃 - 반응형 */
    --nav-height: clamp(56px, 8vw, 70px);
    --radius: clamp(12px, 2vw, 16px);
    --radius-sm: clamp(6px, 1vw, 8px);
    --spacing: clamp(8px, 2vw, 16px);
    --font-sm: clamp(0.75rem, 1.5vw, 0.875rem);
    --font-md: clamp(0.875rem, 2vw, 1rem);
    --font-lg: clamp(1rem, 2.5vw, 1.25rem);
}


/* ===== 리셋 & 기본 ===== */
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { height: 100%; overflow: auto; }
body {
    font-family: 'Noto Sans KR', sans-serif;
    background: var(--bg-cream);
    color: var(--text-primary);
    line-height: 1.6;
}

/* ===== 페이지 컨테이너 ===== */
.page { display: none; height: 100vh; }
.page.active { display: flex; flex-direction: column; }

/* ===== 보미 캐릭터 글로우 효과 ===== */
.bomi-img, .step-bomi, .greeting-bomi, .nav-bomi, .bomi-float {
    filter: drop-shadow(0 4px 12px rgba(124, 179, 66, 0.3));
    transition: all 0.3s ease;
}
.bomi-img:hover, .step-bomi:hover, .greeting-bomi:hover {
    filter: drop-shadow(0 8px 20px rgba(124, 179, 66, 0.5));
    transform: scale(1.05);
}

/* ===== 로그인 페이지 ===== */
.login-container {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    background: linear-gradient(135deg, var(--bg-cream) 0%, var(--bg-soft) 100%);
    padding: 20px;
}
.login-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 40px;
    width: 100%;
    max-width: 420px;
    box-shadow: var(--shadow-lg);
    text-align: center;
}
.login-bomi { margin-bottom: 20px; }
.login-bomi .bomi-img { width: 120px; height: auto; animation: bomiFloat 3s ease-in-out infinite; }
.login-header h1.logo-text {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--main-color);
    margin-bottom: 8px;
}
.logo-subtitle { color: var(--text-muted); font-size: 0.95rem; margin-bottom: 30px; }
.login-form { text-align: left; }
.input-group {
    position: relative;
    margin-bottom: 16px;
}
.input-group input {
    width: 100%;
    padding: 14px 14px 14px 48px;
    border: 2px solid #E0E0E0;
    border-radius: var(--radius-sm);
    font-size: 1rem;
    transition: all 0.3s;
}
.input-group input:focus { border-color: var(--main-color); outline: none; }
.input-icon {
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
}
.login-footer { margin-top: 20px; }
.btn-link {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 0.9rem;
}
.btn-link strong { color: var(--main-color); }

/* ===== 버튼 ===== */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 24px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
}
.btn-primary {
    background: linear-gradient(135deg, var(--main-color) 0%, var(--main-color-dark) 100%);
    color: white;
}
.btn-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }
.btn-secondary { background: var(--secondary-color); color: white; }
.btn-outline { background: transparent; border: 2px solid var(--main-color); color: var(--main-color); }
.btn-outline:hover { background: var(--main-color); color: white; }
.btn-full { width: 100%; }
.btn-sm { padding: 8px 16px; font-size: 0.875rem; }

/* ===== 회원가입 ===== */
.signup-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 30px 40px;
    overflow-y: auto;
    height: 100vh;
}
.progress-steps {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 30px;
}
.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}
.step-circle {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #E0E0E0;
    color: #888;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
}
.step.active .step-circle { background: var(--main-color); color: white; }
.step.completed .step-circle { background: var(--success); color: white; }
.step-label { font-size: 0.85rem; color: var(--text-muted); }
.step.active .step-label { color: var(--main-color); font-weight: 500; }
.step-line { flex: 1; height: 3px; background: #E0E0E0; margin: 0 15px; max-width: 80px; }
.signup-step { display: none; }
.signup-step.active { display: block; }
.step-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 30px;
    padding: 20px;
    background: linear-gradient(135deg, var(--bg-soft) 0%, var(--bg-cream) 100%);
    border-radius: var(--radius);
}
.step-bomi { width: 80px; height: auto; }
.step-header h2 { color: var(--main-color); margin-bottom: 4px; }
.step-header p { color: var(--text-muted); font-size: 0.95rem; }
.signup-form { background: var(--bg-card); padding: 30px; border-radius: var(--radius); box-shadow: var(--shadow-sm); }
.form-section { margin-bottom: 30px; }
.form-section h3 {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-primary);
    font-size: 1.1rem;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--bg-soft);
}
.form-section h3 .material-icons-round { color: var(--main-color); }
.input-wrapper { margin-bottom: 16px; }
.input-wrapper label {
    display: block;
    margin-bottom: 6px;
    font-weight: 500;
    color: var(--text-secondary);
}
.input-wrapper .required { color: var(--danger); }
.input-wrapper input, .input-wrapper select, .input-wrapper textarea {
    width: 100%;
    padding: 12px 14px;
    border: 2px solid #E0E0E0;
    border-radius: var(--radius-sm);
    font-size: 1rem;
    transition: all 0.3s;
}
.input-wrapper input:focus, .input-wrapper select:focus, .input-wrapper textarea:focus {
    border-color: var(--main-color);
    outline: none;
}
.input-wrapper.has-error input, .input-wrapper.has-error select {
    border-color: var(--danger);
}
.error-text { color: var(--danger); font-size: 0.85rem; margin-top: 4px; display: block; min-height: 20px; }
.input-with-btn { display: flex; gap: 10px; }
.input-with-btn input { flex: 1; }

/* 생년월일 드롭다운 */
.birth-select-group { display: flex; gap: 10px; }
.birth-select { flex: 1; }

/* 라디오 버튼 */
.radio-group { display: flex; gap: 12px; flex-wrap: wrap; }
.radio-group.vertical { flex-direction: column; gap: 10px; }
.radio-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}
.radio-label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    padding: 12px 20px;
    background: var(--bg-soft);
    border: 2px solid transparent;
    border-radius: var(--radius-sm);
    transition: all 0.2s ease;
}
.radio-label:hover {
    background: var(--secondary-light);
}
.radio-label input { display: none; }
.radio-label input:checked ~ * {
    color: var(--main-color);
}
.radio-label:has(input:checked) {
    background: #E8F5E9;
    border-color: var(--main-color);
}
.radio-mark {
    display: none;
}
.radio-label input:checked + .radio-mark {
    border-color: var(--main-color);
}
.radio-label input:checked + .radio-mark::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 10px;
    height: 10px;
    background: var(--main-color);
    border-radius: 50%;
}

/* 약관 */
.terms-container { background: var(--bg-soft); padding: 20px; border-radius: var(--radius-sm); }
.checkbox-label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
}
.checkbox-label input { display: none; }
.checkmark {
    width: 22px;
    height: 22px;
    border: 2px solid #CCC;
    border-radius: 4px;
    position: relative;
}
.checkbox-label input:checked + .checkmark {
    background: var(--main-color);
    border-color: var(--main-color);
}
.checkbox-label input:checked + .checkmark::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 14px;
}
.terms-all { font-weight: 600; margin-bottom: 15px; }
.terms-divider { height: 1px; background: #DDD; margin: 15px 0; }
.term-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
}
.term-toggle {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-muted);
    transition: transform 0.3s;
}
.term-toggle.active { transform: rotate(180deg); }
.term-content {
    display: none;
    padding: 15px;
    background: white;
    border-radius: var(--radius-sm);
    margin: 10px 0;
    font-size: 0.9rem;
    color: var(--text-secondary);
}
.term-content.active { display: block; }
.form-buttons { display: flex; gap: 10px; justify-content: flex-end; margin-top: 30px; }

/* 기기 등록 */
.device-method-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
.method-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 15px;
    background: var(--bg-soft);
    border: 2px solid transparent;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.3s;
}
.method-btn.active { background: white; border-color: var(--main-color); color: var(--main-color); }
.device-input-section { display: none; }
.device-input-section.active { display: block; }
.qr-scanner-placeholder {
    text-align: center;
    padding: 60px 20px;
    background: var(--bg-soft);
    border-radius: var(--radius);
    border: 2px dashed var(--main-color);
}
.qr-scanner-placeholder .material-icons-round { font-size: 64px; color: var(--main-color); margin-bottom: 15px; }
.device-list { min-height: 100px; }
.empty-device-list {
    text-align: center;
    padding: 40px;
    color: var(--text-muted);
}
.empty-device-list .material-icons-round { font-size: 48px; margin-bottom: 10px; }
.device-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background: var(--bg-soft);
    border-radius: var(--radius-sm);
    margin-bottom: 10px;
}
.device-item-info { display: flex; align-items: center; gap: 12px; }
.device-item-icon {
    width: 40px;
    height: 40px;
    background: var(--main-color);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.device-item-text h5 { font-weight: 500; margin-bottom: 2px; }
.device-item-text span { font-size: 0.85rem; color: var(--text-muted); }
.device-item-remove {
    background: none;
    border: none;
    color: var(--danger);
    cursor: pointer;
    padding: 5px;
}

/* ===== 메인 앱 ===== */
/* 2) 100vh는 유지하되, 최신 브라우저에서 더 안정적인 dvh도 함께 */
#main-app {
  height: 100vh;
  height: 100dvh;           /* 추가(지원 브라우저에서 더 정확) */
  overflow: hidden;
}
#main-app.active { display: flex; }

/* 네비게이션 */
.main-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 30px;
    height: var(--nav-height);
    background: var(--bg-card);
    box-shadow: var(--shadow-sm);
    flex-shrink: 0;
}
.nav-brand { display: flex; align-items: center; gap: 10px; }
.nav-bomi { width: 40px; height: auto; }
.nav-logo-text { font-size: 1.5rem; font-weight: 700; color: var(--main-color); }
.nav-menu { display: flex; gap: 10px; list-style: none; }
.nav-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 18px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    color: var(--text-muted);
    transition: all 0.3s;
}
.nav-item:hover { background: var(--bg-soft); color: var(--text-primary); }
.nav-item.active { background: var(--main-color); color: white; }
.nav-actions { display: flex; gap: 10px; }
.nav-bell, .nav-logout {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    border: none;
    background: var(--bg-soft);
    cursor: pointer;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
}
.nav-bell:hover, .nav-logout:hover { background: var(--main-color-light); color: var(--main-color-dark); }
.bell-badge {
    position: absolute;
    top: -2px;
    right: -2px;
    width: 20px;
    height: 20px;
    background: var(--danger);
    color: white;
    font-size: 0.75rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 뷰 컨테이너 */
.view {
    display: none;
    flex: 1;
    overflow-y: auto;
    padding: 20px 30px;
    min-height: 0;
    background: var(--bg-cream);
}
.view.active {
    display: block;
}
.view-header { margin-bottom: 20px; }
.view-header h2 { color: var(--text-primary); margin-bottom: 4px; }
.view-header p { color: var(--text-muted); }

/* ===== 대시보드 (No-Scroll 최적화) ===== */
#dashboard-view {
    display: none;
    padding: 15px 20px;
    overflow: auto;
    height: 100%;
    min-height: 0;
    background: var(--bg-cream);
}
#dashboard-view.active {
    display: flex;
    flex-direction: column;
}
#report-view,



/* ========================================
   헬스체크 뷰 (화면 꽉 차게 수정된 버전)
======================================== */

#report-view,
#healthcheck-view,
#mypage-view {
    background: var(--bg-cream);
    width: 100%;
    min-height: 100vh;
    box-sizing: border-box;
}

#healthcheck-view.active {
    display: block;
    overflow-y: auto;
    padding: 20px; /* 적절한 사방 여백 추가 */
}

/* 헤더 너비 제한 해제 */
#healthcheck-view .view-header {
    width: 100%;
    max-width: none; 
    text-align: left; /* 대시보드 느낌을 위해 왼쪽 정렬로 변경 */
    margin: 0 0 24px 0;
}

/* 카드 요소 너비 제한 해제 */
#healthcheck-view .card {
    max-width: none; 
    width: 100%;
    margin: 0 0 20px auto;
}

/* 대시보드 인사말 (상단 바) */
.dashboard-greeting {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 25px;
    background: linear-gradient(135deg, var(--bg-soft) 0%, var(--secondary-light) 50%, var(--bg-soft) 100%);
    border-radius: var(--radius);
    margin-bottom: 20px;
    flex-shrink: 0;
    width: 100%;
    box-sizing: border-box;
}

.greeting-content { display: flex; align-items: center; gap: 15px; }
.greeting-bomi { width: 60px; height: auto; }
.greeting-text h1 { font-size: 1.4rem; margin-bottom: 2px; color: var(--text-primary); }
.greeting-text p { color: var(--text-secondary); font-size: 0.95rem; }
.greeting-date {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-muted);
    font-size: 0.9rem;
}

/* 4개 지표 그리드: 가로로 꽉 차게 4열 배치 */
.metrics-grid {
    display: grid;
    /* 핵심 수정: 한 줄에 4개가 꽉 차게(1fr씩 4개) 배치 */
    grid-template-columns: repeat(4, 1fr); 
    gap: 20px;
    margin-bottom: 24px;
    flex-shrink: 0;
    width: 100%;
}

.metric-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: var(--shadow-sm);
    min-height: 90px;
    transition: transform 0.2s;
}

.metric-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-md);
}

.metric-icon {
    width: 48px;
    height: 48px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    flex-shrink: 0;
}

.metric-card.health .metric-icon { background: linear-gradient(135deg, #EF5350, #E53935); }
.metric-card.activity .metric-icon { background: linear-gradient(135deg, var(--main-color), var(--main-color-dark)); }
.metric-card.sleep .metric-icon { background: linear-gradient(135deg, #7E57C2, #5E35B1); }
.metric-card.emotion .metric-icon { background: linear-gradient(135deg, var(--secondary-color), #FF9800); }

.metric-info { flex: 1; min-width: 0; }
.metric-label { display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 4px; }
.metric-value { font-size: 1.5rem; font-weight: 700; color: var(--text-primary); white-space: nowrap; }
.metric-value small { font-size: 0.9rem; font-weight: 400; color: var(--text-muted); margin-left: 2px; }

.metric-badge {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
}
.metric-badge.good { background: #E8F5E9; color: var(--success); }
.metric-badge.normal { background: #FFF8E1; color: var(--warning); }
.metric-badge.warning { background: #FFEBEE; color: var(--danger); }

/* 반응형 처리: 화면이 작아지면 2열 또는 1열로 조절 */
@media (max-width: 1200px) {
    .metrics-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 600px) {
    .metrics-grid {
        grid-template-columns: 1fr;
    }
}




/* 대시보드 메인 그리드 (상단: 감정+인지, 하단: 환경, 사이드: 알림+기기+AI) */
.dashboard-main-grid {
  display: grid;
   grid-template-columns: minmax(0, 1fr) clamp(260px, 22vw, 320px);
  /* ✅ 상단은 최소 높이 보장 + 하단(실내 환경)을 키우면 스크롤로 자연스럽게 내려가도록 */
  grid-template-rows: minmax(340px, 1fr) minmax(260px, auto);

  gap: 16px;
  flex: 1;
  min-height: 0;
  overflow: visible;
}
.dashboard-top-row {
    grid-column: 1;
    grid-row: 1;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 300px), 1fr));
    gap: var(--spacing);
    min-height: 0;
}
.dashboard-top-row > .card {
    height: 100%;
    min-width: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}
.dashboard-top-row > .card .chart-container-md {
    flex: 1;
    min-height: 200px;
    overflow: hidden;
}
/* ✅ 기존 max-height(180px) 제거하고 최소 높이로 키우기 */
.dashboard-bottom-row {
  grid-column: 1;
  grid-row: 2;
  min-height: 260px; /* 더 키우고 싶으면 300~340px로 올리셔도 좋아요 */
}

.dashboard-bottom-row .card {
    height: 100%;
}
/* ✅ 기존 max-height(120px) 제거 + 차트 영역 최소 높이 확보 */
.dashboard-bottom-row .chart-container-wide {
  min-height: 180px; /* 더 키우고 싶으면 220px 정도 추천드려요 */
}
.dashboard-side {
    grid-column: 2;
    grid-row: 1 / 3;
    display: flex;
    flex-direction: column;
    gap: 12px;
    min-height: 0;
    overflow-y: auto;
}
.dashboard-side > .card {
    flex: 1;
    min-height: 120px;
    min-width: 0;
}
.dashboard-side > .card:first-child {
    flex: 1.2;
}
.dashboard-side > .card:last-child {
    flex: 0.9;
}

/* 카드 */
/* 카드 */
.card {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 16px;
    box-shadow: var(--shadow-sm);
    border: 1px solid rgba(124, 179, 66, 0.1);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-width: 0;
    min-height: 0;
}
.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}
.card-header h3 {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 1rem;
    color: var(--text-primary);
}
.card-header h3 .material-icons-round { color: var(--main-color); font-size: 1.2rem; }
.card-badge {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
}
.card-badge.positive { background: #E8F5E9; color: var(--success); }
.card-badge.good { background: #E3F2FD; color: var(--info); }
.link-btn {
    background: none;
    border: none;
    color: var(--main-color);
    cursor: pointer;
    font-size: 0.85rem;
}
.icon-btn {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: none;
    background: var(--bg-soft);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
}
.icon-btn.sm { width: 28px; height: 28px; }
.icon-btn.sm .material-icons-round { font-size: 1rem; }

/* 차트 컨테이너 */
.chart-container-md,
.chart-container-wide,
.chart-container {
    flex: 1;
    min-height: 0;
    min-width: 0;
    position: relative;
    width: 100%;
}
.chart-container-md canvas,
.chart-container-wide canvas,
.chart-container canvas {
    width: 100% !important;
    height: 100% !important;
    max-width: 100%;
    max-height: 100%;
}

/* 감정 분석 카드 */
.emotion-legend {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 10px;
}
.legend-item { display: flex; align-items: center; gap: 5px; font-size: 0.8rem; color: var(--text-muted); }
.dot { width: 10px; height: 10px; border-radius: 50%; }
.dot.positive { background: var(--success); }
.dot.neutral { background: var(--secondary-color); }
.dot.negative { background: var(--danger); }


/* ===== 대시보드 상단: 인지 활동 우측 AI 추천 영역 ===== */
@media (min-width: 1024px) {
  /* 감정 분석 / 인지 활동 / AI 추천 3칸 고정 (데스크톱에서 "우측 빈 공간" 확보) */
  .dashboard-top-row{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr)); /* ✅ 두 박스 동일하게 확장 */
  gap: 16px;
  min-width: 0;
}
}
.ai-led-card .card-header h3 {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* LED 전광판 스타일 마퀴 */
.ai-led-board {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.ai-led-window {
  background: rgba(8, 18, 11, 0.95);
  border: 1px solid rgba(124, 179, 66, 0.25);
  border-radius: 14px;
  padding: 10px 12px;
  overflow: hidden;
  position: relative;
}
.ai-led-window::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 20% 30%, rgba(124, 179, 66, 0.18), transparent 45%),
              radial-gradient(circle at 80% 70%, rgba(239, 83, 80, 0.10), transparent 50%);
  pointer-events: none;
}
.ai-led-track {
  display: inline-flex;
  align-items: center;
  gap: 42px;
  white-space: nowrap;
  width: max-content;
  animation: ai-led-marquee-ltr 10s linear infinite;
  will-change: transform;
}
.ai-led-text {
  font-weight: 700;
  letter-spacing: 0.06em;
  color: rgba(245, 255, 245, 0.95);
  text-shadow: 0 0 8px rgba(124, 179, 66, 0.35), 0 0 14px rgba(124, 179, 66, 0.18);
}
@keyframes ai-led-marquee-ltr {
  0% { transform: translateX(-50%); }
  100% { transform: translateX(0%); }
}
@media (prefers-reduced-motion: reduce) {
  .ai-led-track { animation: none; transform: none; }
}

.ai-led-hint {
  font-size: 0.78rem;
  color: var(--text-light);
  line-height: 1.3;
}

/* ===== 리포트: 주의/위험 이력 구분/강조 ===== */
.alert-history-section {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 14px;
}
.alert-history-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}
.badge-latest {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 0.78rem;
  font-weight: 700;
  background: rgba(124, 179, 66, 0.14);
  border: 1px solid rgba(124, 179, 66, 0.25);
  color: var(--main-color);
}
.section-title {
  font-size: 0.85rem;
  font-weight: 700;
  color: var(--text-muted);
}
.alert-history-item.unread {
  box-shadow: 0 0 0 2px rgba(66, 165, 245, 0.22);
  position: relative;

  /* ✅ 추가: '미확인' 배지 자리만큼 위쪽 공간 확보 */
  padding-top: 28px;
}

.alert-history-item.unread::after {
  content: '미확인';
  position: absolute;
  right: 12px;
  top: 10px;

  /* ✅ 추가: 겹침/클릭 방해 방지용(안전) */
  z-index: 2;
  pointer-events: none;

  font-size: 0.72rem;
  padding: 3px 8px;
  border-radius: 999px;
  background: rgba(66, 165, 245, 0.14);
  border: 1px solid rgba(66, 165, 245, 0.25);
  color: var(--info);
  white-space: nowrap;
}

/* 인지 활동 카드 */
.cognitive-summary {
    display: flex;
    justify-content: space-around;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--bg-soft);
}
.cog-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    font-size: 0.8rem;
    color: var(--text-secondary);
}
.cog-item .material-icons-round { font-size: 1.2rem; color: var(--main-color); }

/* 환경 카드 */
.environment-wide-card { height: 100%; }
.env-current-values { display: flex; gap: 15px; }
.env-value {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 0.85rem;
    padding: 4px 10px;
    background: var(--bg-soft);
    border-radius: 20px;
}
.env-value .material-icons-round { font-size: 1rem; }
.env-value.temp { color: #EF5350; }
.env-value.humidity { color: #42A5F5; }
.env-value.air { color: var(--success); }

/* Compact 카드 (사이드바용) */
.card.compact { padding: 12px; }
.card.compact .card-header { margin-bottom: 8px; }
.card.compact .card-header h3 { font-size: 0.9rem; }
.notification-list.compact,
.device-status-list.compact {
  /* ✅ 카드 높이에 맞춰 자연스럽게 커지고, 많아질 때만 스크롤 */
  flex: 1;
  min-height: 0;
  max-height: none;
  overflow-y: auto;
}

.ai-recommendations.compact { display: flex; flex-direction: column; gap: 6px; }
.ai-chip {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: var(--bg-soft);
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    color: var(--text-secondary);
}
.ai-chip .material-icons-round { font-size: 1rem; color: var(--main-color); }

/* 알림 아이템 */
.notif-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background 0.2s;
}
.notif-item:hover { background: var(--bg-soft); }
.notif-item.active { background: var(--bg-soft); }
.notif-item-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.notif-item.info .notif-item-icon { background: #E3F2FD; color: var(--info); }
.notif-item.warning .notif-item-icon { background: #FFF8E1; color: var(--warning); }
.notif-item.danger .notif-item-icon { background: #FFEBEE; color: var(--danger); }
.notif-item-text { flex: 1; }
.notif-item-title { font-size: 0.85rem; font-weight: 500; }
.notif-item-sub { font-size: 0.75rem; color: var(--text-muted); }

/* 기기 상태 아이템 */
.device-status-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    border-radius: var(--radius-sm);
    background: var(--bg-soft);
    margin-bottom: 8px;
}
.device-status-info { display: flex; align-items: center; gap: 10px; }
.device-status-icon {
    width: 36px;
    height: 36px;
    background: var(--main-color);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.device-status-icon .material-icons-round { font-size: 1.1rem; }
.device-status-text h5 { font-size: 0.85rem; font-weight: 500; }
.device-status-text span { font-size: 0.75rem; color: var(--text-muted); }
.device-status-badge {
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 0.7rem;
}
.device-status-badge.online { background: #E8F5E9; color: var(--success); }
.device-status-badge.offline { background: #FFEBEE; color: var(--danger); }

/* ===== 리포트 뷰 ===== */
.report-period-selector {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}
.period-btn {
    padding: 10px 24px;
    border: 2px solid var(--main-color);
    background: white;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-weight: 500;
    color: var(--main-color);
    transition: all 0.3s;
}
.period-btn.active { background: var(--main-color); color: white; }
.report-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 20px;
}
.report-grid .card {
    max-height: 350px;
    overflow: hidden;
}
.report-grid .card .chart-container-wide {
    max-height: 250px;
}
.report-grid .card.full-width { 
    grid-column: 1 / -1;
    max-height: 300px;
}

/* 주의/위험 이력 */
.alert-history-card { margin-top: 20px; }
.alert-history-list { max-height: 300px; overflow-y: auto; }
.alert-history-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    border-radius: var(--radius-sm);
    margin-bottom: 10px;
}
.alert-history-item.warning { background: #FFF8E1; border-left: 4px solid var(--warning); }
.alert-history-item.danger { background: #FFEBEE; border-left: 4px solid var(--danger); }
.alert-history-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.alert-history-item.warning .alert-history-icon { background: var(--warning); color: white; }
.alert-history-item.danger .alert-history-icon { background: var(--danger); color: white; }
.alert-history-content { flex: 1; }
.alert-history-content h4 { font-size: 0.95rem; margin-bottom: 4px; }
.alert-history-content p { font-size: 0.85rem; color: var(--text-muted); }
.alert-history-time { font-size: 0.8rem; color: var(--text-light); }

/* ===== 마이페이지 (3컬럼 레이아웃) ===== */
.mypage-three-columns {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 280px), 1fr));
    gap: var(--spacing);
    margin-bottom: var(--spacing);
    align-items: start;
}
.mypage-card { height: fit-content; min-height: 300px; }
.info-list { display: flex; flex-direction: column; gap: 12px; }
.info-item {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid var(--bg-soft);
}
.info-label { color: var(--text-muted); font-size: 0.9rem; }
.info-value { font-weight: 500; color: var(--text-primary); text-align: right; max-width: 60%; }
.info-value.masked { color: var(--text-secondary); }

/* 비밀번호 변경 섹션 */
.password-change-section { margin-top: 20px; border-top: 1px solid var(--bg-soft); padding-top: 15px; }
.password-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    padding: 10px 0;
}
.password-header span { display: flex; align-items: center; gap: 8px; font-weight: 500; }
.password-header .material-icons-round:first-child { color: var(--main-color); }
.toggle-icon { transition: transform 0.3s; }
.password-header.active .toggle-icon { transform: rotate(180deg); }
.password-form-wrapper {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}
.password-form-wrapper.active { max-height: 400px; }
.compact-form { padding-top: 15px; }
.compact-form .input-wrapper { margin-bottom: 12px; }
.compact-form .input-wrapper label { font-size: 0.85rem; }
.compact-form .input-wrapper input { padding: 10px 12px; font-size: 0.9rem; }

/* 알림 설정 카드 */
.notification-settings-card { margin-bottom: 20px; }
.setting-list { display: flex; flex-direction: column; gap: 15px; }
.setting-list.horizontal { flex-direction: row; }
.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background: var(--bg-soft);
    border-radius: var(--radius-sm);
    flex: 1;
}
.setting-info { flex: 1; }
.setting-label { display: block; font-weight: 500; margin-bottom: 4px; }
.setting-desc { font-size: 0.85rem; color: var(--text-muted); }
.toggle-switch { position: relative; width: 50px; height: 26px; }
.toggle-switch input { display: none; }
.toggle-slider {
    position: absolute;
    inset: 0;
    background: #CCC;
    border-radius: 26px;
    cursor: pointer;
    transition: background 0.3s;
}
.toggle-slider::before {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    left: 3px;
    top: 3px;
    background: white;
    border-radius: 50%;
    transition: transform 0.3s;
}
.toggle-switch input:checked + .toggle-slider { background: var(--main-color); }
.toggle-switch input:checked + .toggle-slider::before { transform: translateX(24px); }

/* ===== 모달 ===== */
.modal { display: none; position: fixed; inset: 0; z-index: 1000; }
.modal.active { display: flex; align-items: center; justify-content: center; }
.modal-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.5); }
.modal-content {
    position: relative;
    background: var(--bg-card);
    border-radius: var(--radius);
    width: 90%;
    max-width: 500px;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}
.modal-content.modal-lg { max-width: 700px; }
.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    border-bottom: 1px solid var(--bg-soft);
}
.modal-header h3 { display: flex; align-items: center; gap: 8px; font-size: 1.2rem; }
.modal-header h3 .material-icons-round { color: var(--main-color); }
.modal-close { background: none; border: none; cursor: pointer; color: var(--text-muted); padding: 5px; }
.modal-body { padding: 20px; overflow-y: auto; flex: 1; }
.modal-footer { display: flex; gap: 10px; justify-content: flex-end; padding: 20px; border-top: 1px solid var(--bg-soft); }

/* 알림 필터 */
.notification-filter { display: flex; gap: 10px; margin-bottom: 20px; }
.filter-btn {
    padding: 8px 16px;
    border: 1px solid #DDD;
    background: white;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.3s;
}
.filter-btn.active { background: var(--main-color); color: white; border-color: var(--main-color); }
.full-notification-list { max-height: 400px; overflow-y: auto; }
.full-notif-item {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 15px;
    border-radius: var(--radius-sm);
    margin-bottom: 10px;
}
.full-notif-item.unread { background: var(--bg-soft); }
.full-notif-item.info { border-left: 4px solid var(--info); }
.full-notif-item.warning { border-left: 4px solid var(--warning); }
.full-notif-item.danger { border-left: 4px solid var(--danger); }
.full-notif-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.full-notif-item.info .full-notif-icon { background: #E3F2FD; color: var(--info); }
.full-notif-item.warning .full-notif-icon { background: #FFF8E1; color: var(--warning); }
.full-notif-item.danger .full-notif-icon { background: #FFEBEE; color: var(--danger); }
.full-notif-content { flex: 1; }
.full-notif-content h4 { font-size: 1rem; margin-bottom: 4px; }
.full-notif-content p { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 4px; }
.notif-time { font-size: 0.8rem; color: var(--text-light); }

/* ===== 보미 AI 비서 ===== */
.bomi-assistant {
    position: fixed;
    bottom: 20px;
    left: 30px;
    z-index: 1;
    display: none;
    flex-direction: column;
    align-items: center;
}
#login-page .bomi-assistant,
#signup-page .bomi-assistant {
    display: none;
}
.bomi-float {
    width: 80px;
    height: auto;
    cursor: pointer;
    animation: bomiFloat 3s ease-in-out infinite;
}
.bomi-bubble {
    background: var(--bg-card);
    padding: 10px 16px;
    border-radius: 20px;
    margin-bottom: 10px;
    box-shadow: var(--shadow-md);
    font-size: 0.9rem;
    animation: bubbleFadeIn 0.4s ease;
}

/* ===== 토스트 ===== */
#toast-container {
    position: fixed;
    top: 100px;
    right: 30px;
    left: auto;
    transform: none;
    z-index: 2000;
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-width: 320px;
}
.toast {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 15px 20px;
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
    animation: toastSlideIn 0.3s ease;
    min-width: 300px;
}
.toast.success { border-left: 4px solid var(--success); }
.toast.warning { border-left: 4px solid var(--warning); }
.toast.danger { border-left: 4px solid var(--danger); }
.toast.info { border-left: 4px solid var(--info); }
.toast-icon { font-size: 1.5rem; }
.toast.success .toast-icon { color: var(--success); }
.toast.warning .toast-icon { color: var(--warning); }
.toast.danger .toast-icon { color: var(--danger); }
.toast.info .toast-icon { color: var(--info); }
.toast-content { flex: 1; }
.toast-title { font-weight: 600; margin-bottom: 2px; }
.toast-message { font-size: 0.9rem; color: var(--text-secondary); }
.toast-close { background: none; border: none; cursor: pointer; color: var(--text-muted); }

/* ===== 애니메이션 ===== */
@keyframes bomiFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}
@keyframes bubbleFadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes toastSlideIn {
    from { opacity: 0; transform: translate(-50%, -20px); }
    to { opacity: 1; transform: translate(-50%, 0); }
}
@keyframes toastSlideOut {
    from { opacity: 1; }
    to { opacity: 0; transform: translateY(-20px); }
}
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}
.shake { animation: shake 0.4s ease; }

/* ===== 반응형 ===== */
@media (max-width: 1200px) {
    .dashboard-main-grid {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto;
    }
    .dashboard-side {
        grid-column: 1;
        grid-row: 3;
        flex-direction: row;
        flex-wrap: wrap;
        overflow-y: visible;
    }
    .dashboard-side > .card {
        flex: 1 1 calc(33% - var(--spacing));
        min-width: 200px;
    }
}

@media (max-width: 900px) {
    .dashboard-side {
        flex-direction: column;
    }
    .dashboard-side > .card {
        flex: none;
        width: 100%;
    }
    .setting-list.horizontal {
        flex-direction: column;
    }
}

@media (max-width: 768px) {
    :root {
        --nav-height: 56px;
    }
    .main-nav {
        padding: 0 var(--spacing);
    }
    .nav-menu span:last-child {
        display: none;
    }
    .nav-item {
        padding: 10px;
    }
    .view {
        padding: var(--spacing);
    }
    .greeting-section {
        flex-direction: column;
        text-align: center;
        gap: var(--spacing);
    }
    .greeting-bomi {
        width: 60px;
    }
}

@media (max-width: 480px) {
    .login-card {
        padding: 20px var(--spacing);
        margin: var(--spacing);
    }
    .signup-container {
        padding: var(--spacing);
    }
    .metric-card {
        padding: 10px 12px;
    }
    .metric-value {
        font-size: 1.2rem;
    }
}
/* ===========================
   설계서용(Compact) 회원가입 모드
   - 다른 화면 영향 없도록 #signup-page에만 한정
   =========================== */
body.doc-mode #signup-page .signup-container {
  padding: 18px 22px;
  max-width: 1100px;
}

body.doc-mode #signup-page .step-header {
  margin-bottom: 12px;
}
body.doc-mode #signup-page .step-bomi {
  width: 56px;
  height: auto;
}
body.doc-mode #signup-page .signup-form .form-section {
  padding: 14px;
}
body.doc-mode #signup-page .signup-form .form-section h3 {
  margin: 0 0 10px 0;
  font-size: 1rem;
}
body.doc-mode #signup-page .input-wrapper {
  margin-bottom: 10px;
}
body.doc-mode #signup-page input,
body.doc-mode #signup-page select,
body.doc-mode #signup-page textarea {
  padding: 10px 12px;
}

/* 데스크톱에서 2열로 배치해서 세로 길이 줄이기 */
@media (min-width: 1024px) {
  body.doc-mode #signup-page .signup-form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px 18px;
    align-items: start;
  }

  body.doc-mode #signup-page .signup-form .form-section {
    margin: 0; /* 섹션 간 세로 간격 제거 */
  }

  /* 약관/버튼 영역은 전체 너비로(구성 유지) */
  body.doc-mode #signup-page .signup-form .form-section:has(.terms-container),
  body.doc-mode #signup-page .signup-form .form-section:has(.form-buttons) {
    grid-column: 1 / -1;
  }
}

/* 약관 영역도 높이를 과도하게 먹지 않게(기능/구성은 유지) */
body.doc-mode #signup-page .terms-container {
  padding: 10px 12px;
}
body.doc-mode #signup-page .term-item {
  padding: 10px;
}
body.doc-mode #signup-page .term-item.active .term-content {
  max-height: 120px; /* 기존보다 작게 */
}

body.doc-mode #signup-page .form-buttons {
  margin-top: 12px;
  gap: 10px;
}

/* (선택) 그래도 아주 조금 넘치면 아래 한 줄만 추가해서 더 압축할 수 있어요 */
/* body.doc-mode #signup-page .signup-container { zoom: 0.92; } */
/* =========================================
   [설계서 모드] 회원가입(3단계) 화면 압축
   - 다른 화면 영향 없음: #signup-page.doc-mode 에만 적용
   - 내부 스크롤(컨테이너 스크롤) 제거 + 2열 배치 + 여백 축소
   ========================================= */

/* 회원가입 컨테이너: 내부 스크롤 제거 + 더 넓게 */
#signup-page.doc-mode .signup-container{
  max-width: 1180px;
  height: auto;          /* 기존 100vh 고정 해제 */
  overflow: visible;     /* 기존 overflow-y:auto 해제 */
  padding: 16px 18px;    /* 여백 줄이기 */
}

/* 상단 진행바/헤더 압축 */
#signup-page.doc-mode .progress-steps{
  margin-bottom: 14px;
  transform: scale(0.95);
  transform-origin: center top;
}
#signup-page.doc-mode .step-header{
  margin-bottom: 14px;
  padding: 12px 14px;
  gap: 12px;
}
#signup-page.doc-mode .step-bomi{ width: 54px; }

/* 폼/섹션 간격 압축 */
#signup-page.doc-mode .signup-form{
  padding: 16px;
}
#signup-page.doc-mode .form-section{
  margin-bottom: 14px;
}
#signup-page.doc-mode .form-section h3{
  font-size: 1rem;
  margin-bottom: 12px;
  padding-bottom: 8px;
}
#signup-page.doc-mode .input-wrapper{
  margin-bottom: 10px;
}
#signup-page.doc-mode input,
#signup-page.doc-mode select,
#signup-page.doc-mode textarea{
  padding: 10px 12px;
  font-size: 0.92rem;
}

/* 약관 영역: 폼 전체 높이를 과하게 먹지 않도록 "영역만" 제한(페이지 스크롤 최소화) */
#signup-page.doc-mode .terms-container{
  padding: 10px 12px;
  max-height: 220px;
  overflow: auto;
}
#signup-page.doc-mode .term-item{ padding: 10px; }
#signup-page.doc-mode .term-content{ max-height: 90px; overflow: auto; }

/* 버튼 영역 간격 */
#signup-page.doc-mode .form-buttons{
  margin-top: 10px;
  gap: 10px;
}

/* 데스크톱에서는 2열로 배치해서 세로 길이 확 줄이기 */
@media (min-width: 1024px){
  #signup-page.doc-mode .signup-form{
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px 16px;
    align-items: start;
  }

  /* Step 1: 섹션 4개(계정/개인/주소/약관) + 버튼 */
  #signup-page.doc-mode #signup-step-1 .signup-form > .form-section:nth-of-type(1),
  #signup-page.doc-mode #signup-step-1 .signup-form > .form-section:nth-of-type(2){
    grid-column: 1;
  }
  #signup-page.doc-mode #signup-step-1 .signup-form > .form-section:nth-of-type(3),
  #signup-page.doc-mode #signup-step-1 .signup-form > .form-section:nth-of-type(4){
    grid-column: 2;
  }
  #signup-page.doc-mode #signup-step-1 .signup-form > .form-buttons{
    grid-column: 1 / -1;
  }

  /* Step 2: (기본정보/주소/특이사항/동의) 배치 */
  #signup-page.doc-mode #signup-step-2 .signup-form > .form-section:nth-of-type(1),
  #signup-page.doc-mode #signup-step-2 .signup-form > .form-section:nth-of-type(3){
    grid-column: 1;
  }
  #signup-page.doc-mode #signup-step-2 .signup-form > .form-section:nth-of-type(2),
  #signup-page.doc-mode #signup-step-2 .signup-form > .form-section:nth-of-type(4){
    grid-column: 2;
  }
  #signup-page.doc-mode #signup-step-2 .signup-form > .form-buttons{
    grid-column: 1 / -1;
  }

  /* Step 3: (등록방법/등록된기기) 2열 */
  #signup-page.doc-mode #signup-step-3 .signup-form{
    grid-template-columns: 1.15fr 0.85fr;
  }
  #signup-page.doc-mode #signup-step-3 .signup-form > .form-section:nth-of-type(1){
    grid-column: 1;
  }
  #signup-page.doc-mode #signup-step-3 .signup-form > .form-section:nth-of-type(2){
    grid-column: 2;
  }
  #signup-page.doc-mode #signup-step-3 .signup-form > .form-buttons{
    grid-column: 1 / -1;
  }
}
body[data-active-page="signup-page"][data-signup-layout="normal"] #toast-container {
  right: max(20px, calc((100vw - 800px) / 2 + 20px));
}
body[data-active-page="signup-page"][data-signup-layout="doc"] #toast-container {
  right: max(20px, calc((100vw - 1180px) / 2 + 20px));
}

/* 회원가입 화면에서는 X축 -50%가 없는 애니메이션으로 교체 */
body[data-active-page="signup-page"] .toast {
  animation: toastSlideInRight 0.3s ease;
}
@keyframes toastSlideInRight {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ========================================
   보미와 대화 - 음성 대화 화면 (개선)
   ======================================== */

#bomi-chat-view .view-header {
    text-align: center;
    margin-bottom: 10px;
}

.bomi-chat-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    padding: 20px;
    min-height: calc(100vh - 220px);
}

/* ===== 왼쪽: 채팅 영역 ===== */
.chat-section {
    display: flex;
    flex-direction: column;
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    position: relative;
}

/* 초기 빈 화면 (중앙 정렬) */
.chat-empty-state {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    background: linear-gradient(180deg, var(--bg-soft) 0%, var(--bg-card) 100%);
    text-align: center;
    gap: 20px;
}

.chat-empty-state .bomi-avatar {
    width: 140px;
    height: 140px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chat-empty-state .bomi-avatar img {
    width: 130px;
    height: auto;
    filter: drop-shadow(0 8px 20px rgba(124, 179, 66, 0.3));
    animation: bomiFloat 3s ease-in-out infinite;
}

@keyframes bomiFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.bomi-greeting {
    max-width: 280px;
}

.bomi-greeting .greeting-text {
    font-size: 1.3rem;
    color: var(--text-primary);
    margin-bottom: 8px;
    line-height: 1.5;
}

.bomi-greeting .greeting-sub {
    font-size: 0.95rem;
    color: var(--text-muted);
}

.chat-empty-state .bomi-status {
    padding: 10px 24px;
    background: var(--main-color-light);
    color: var(--main-color-dark);
    border-radius: 30px;
    font-size: 0.9rem;
    font-weight: 500;
}

/* 음성 웨이브 */
.voice-wave {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    height: 40px;
    opacity: 0.4;
}

.voice-wave span {
    width: 5px;
    height: 12px;
    background: var(--main-color);
    border-radius: 3px;
    transition: all 0.2s;
}

.voice-wave.active {
    opacity: 1;
}

.voice-wave.active span {
    animation: waveAnimation 0.5s ease-in-out infinite;
}

.voice-wave.active span:nth-child(1) { animation-delay: 0s; }
.voice-wave.active span:nth-child(2) { animation-delay: 0.1s; }
.voice-wave.active span:nth-child(3) { animation-delay: 0.2s; }
.voice-wave.active span:nth-child(4) { animation-delay: 0.1s; }
.voice-wave.active span:nth-child(5) { animation-delay: 0s; }

@keyframes waveAnimation {
    0%, 100% { height: 12px; }
    50% { height: 35px; }
}

/* 채팅 메시지 영역 */
.chat-messages {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    display: none;
    flex-direction: column;
    gap: 15px;
    min-height: 300px;
}

.chat-messages.active {
    display: flex;
}

.chat-message {
    display: flex;
    max-width: 80%;
}

.chat-message.user {
    align-self: flex-end;
}

.chat-message.bomi {
    align-self: flex-start;
}

.message-content {
    padding: 14px 18px;
    border-radius: 20px;
    line-height: 1.6;
    font-size: 1rem;
}

.chat-message.user .message-content {
    background: var(--main-color);
    color: white;
    border-bottom-right-radius: 6px;
}

.chat-message.bomi .message-content {
    background: var(--bg-soft);
    color: var(--text-primary);
    border-bottom-left-radius: 6px;
}

/* 실시간 텍스트 */
.realtime-text {
    padding: 12px 20px;
    font-style: italic;
    color: var(--text-muted);
    background: rgba(124, 179, 66, 0.1);
    display: none;
    border-left: 3px solid var(--main-color);
    margin: 0 20px;
    border-radius: 0 8px 8px 0;
}

.realtime-text.active {
    display: block;
}

/* 녹음 컨트롤 */
.chat-controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 25px 20px;
    border-top: 1px solid var(--bg-soft);
    gap: 12px;
    background: var(--bg-card);
}

.record-btn {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: none;
    background: linear-gradient(145deg, var(--main-color), var(--main-color-dark));
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: 0 6px 20px rgba(124, 179, 66, 0.4);
}

.record-btn:hover {
    transform: scale(1.08);
    box-shadow: 0 8px 25px rgba(124, 179, 66, 0.5);
}

.record-btn.recording {
    background: linear-gradient(145deg, var(--danger), #c62828);
    animation: recordPulse 1.5s ease infinite;
}

@keyframes recordPulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(239, 83, 80, 0.6); }
    50% { box-shadow: 0 0 0 20px rgba(239, 83, 80, 0); }
}

.record-btn .material-icons-round {
    font-size: 36px;
}

.record-hint {
    font-size: 0.9rem;
    color: var(--text-muted);
    font-weight: 500;
}

/* ===== 오른쪽: 분석 영역 ===== */
.analysis-section {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.analysis-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
}

.analysis-card .card-header {
    padding: 18px 20px;
    border-bottom: 1px solid rgba(0,0,0,0.05);
    background: var(--bg-card);
}

.analysis-card .card-header h3 {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
}

.analysis-content {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.analysis-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 16px;
    background: var(--bg-cream);
    border-radius: 12px;
    border: 1px solid rgba(124, 179, 66, 0.1);
    transition: all 0.2s;
}

.analysis-item:hover {
    border-color: var(--main-color-light);
    background: white;
}

.analysis-icon {
    width: 42px;
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(145deg, var(--main-color-light), var(--main-color));
    border-radius: 10px;
    color: white;
}

.analysis-icon .material-icons-round {
    font-size: 22px;
}

.analysis-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.analysis-label {
    font-size: 0.8rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.analysis-value {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
}

/* 대화 통계 */
.conversation-stats {
    display: flex;
    justify-content: space-around;
    padding: 24px 16px;
    gap: 10px;
}

.stat-item {
    text-align: center;
    flex: 1;
    padding: 16px 10px;
    background: var(--bg-cream);
    border-radius: 12px;
    transition: all 0.2s;
}

.stat-item:hover {
    background: white;
    box-shadow: var(--shadow-sm);
}

.stat-icon {
    font-size: 24px;
    color: var(--main-color);
    margin-bottom: 8px;
}

.stat-number {
    display: block;
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--main-color-dark);
    margin-bottom: 4px;
}

.stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* 반응형 */
@media (max-width: 1024px) {
    .bomi-chat-container {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .chat-empty-state {
        padding: 30px 20px;
    }
    
    .chat-empty-state .bomi-avatar img {
        width: 100px;
    }
}

@media (max-width: 600px) {
    .conversation-stats {
        flex-direction: column;
        gap: 12px;
    }
    
    .stat-item {
        padding: 14px;
    }
    
    .record-btn {
        width: 70px;
        height: 70px;
    }
    
    .record-btn .material-icons-round {
        font-size: 30px;
    }
}







/* ===== 대시보드: 인지 활동 헤더(활발 뱃지 사이) AI 추천 전광판 ===== */
/* 기존 카드 헤더 모양은 그대로 두고, 인지 활동 카드만 안전하게 확장 */
.cognitive-card .card-header.cognitive-header{
  align-items:center;
  gap:12px;
}

/* 제목은 줄바꿈/축소 방지, 우측 영역은 남는 공간에서만 확장 */
.cognitive-card .card-header.cognitive-header h3{
  flex: 0 0 auto;
  white-space: nowrap;
}
.cognitive-card .cognitive-header-right{
  flex: 1 1 auto;
  min-width: 0;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 12px;
}
.cognitive-card .cognitive-header-right .card-badge{
  flex: 0 0 auto;
  white-space: nowrap;
  min-width: 44px; /* '활발' 글자 줄바꿈 방지 */
}
.cognitive-card .ai-ticker{
  flex: 1 1 auto;
  min-width: 0; /* ✅ 텍스트가 길어도 flex 안에서 잘 줄어들게 */
}

/* 보미 톤의 LED 전광판(마퀴) - 따뜻한 그린/옐로 계열 */
.ai-ticker-window{
  width:100%;
  height: 30px;
  display:flex;
  align-items:center;
  background: linear-gradient(90deg, rgb(234, 255, 214));
  border: 1px solid rgb(255, 255, 255);
  border-radius: 999px;
  padding: 6px 14px;
  overflow:hidden;
  box-shadow: 0 2px 10px rgba(62,39,35,0.10);
}

.ai-ticker-track{
  display:inline-flex;
  align-items:center;
  gap: 28px;
  white-space: nowrap;
  width: max-content;
  will-change: transform;
  animation: ai-ticker-marquee-ltr 12s linear infinite;
}

.ai-ticker-text{
  font-weight: 800;
  letter-spacing: 0.03em;
  font-size: 0.84rem;
  line-height: 1.15;
  color: rgb(51, 51, 51);
  text-shadow: 0 0 10px rgba(62,39,35,0.18), 0 0 14px rgba(255,183,77,0.18);
}

@keyframes ai-ticker-marquee-ltr{
  0% { transform: translateX(-50%); }
  100% { transform: translateX(0%); }
}

@media (prefers-reduced-motion: reduce){
  .ai-ticker-track{ animation: none; transform:none; }
}

/* ===== 우측 사이드바: 빈 공간(카드 늘어짐) 방지 ===== */
.dashboard-side{
  overflow-y: visible;
}
.dashboard-side > .card{
  flex: 0 0 auto;
}
.dashboard-side .notification-list.compact,
.dashboard-side .device-status-list.compact{
  max-height: 260px;
}





/* ========================================
   보미와 대화 - 스타일 추가
   ======================================== */

#bomi-chat-view .view-header { text-align: left; margin-bottom: 20px; }
.bomi-chat-container { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; padding: 20px; min-height: calc(100vh - 220px); }

/* 왼쪽: 채팅 영역 */
.chat-section { display: flex; flex-direction: column; background: var(--bg-card); border-radius: var(--radius); box-shadow: var(--shadow-md); overflow: hidden; position: relative; }
.chat-empty-state { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; background: linear-gradient(180deg, var(--bg-soft) 0%, var(--bg-card) 100%); text-align: center; gap: 20px; }
.chat-empty-state .bomi-avatar { width: 140px; height: 140px; display: flex; align-items: center; justify-content: center; }
.chat-empty-state .bomi-avatar img { width: 130px; height: auto; filter: drop-shadow(0 8px 20px rgba(124, 179, 66, 0.3)); animation: bomiFloat 3s ease-in-out infinite; }
.bomi-greeting .greeting-text { font-size: 1.3rem; color: var(--text-primary); margin-bottom: 8px; line-height: 1.5; }
.bomi-greeting .greeting-sub { font-size: 0.95rem; color: var(--text-muted); }
.chat-empty-state .bomi-status { padding: 10px 24px; background: var(--main-color-light); color: var(--main-color-dark); border-radius: 30px; font-size: 0.9rem; font-weight: 500; }

/* 음성 웨이브 */
.voice-wave { display: flex; align-items: center; justify-content: center; gap: 5px; height: 40px; opacity: 0.4; }
.voice-wave span { width: 5px; height: 12px; background: var(--main-color); border-radius: 3px; transition: all 0.2s; }
.voice-wave.active { opacity: 1; }
.voice-wave.active span { animation: waveAnimation 0.5s ease-in-out infinite; }
.voice-wave.active span:nth-child(1) { animation-delay: 0s; }
.voice-wave.active span:nth-child(2) { animation-delay: 0.1s; }
.voice-wave.active span:nth-child(3) { animation-delay: 0.2s; }
.voice-wave.active span:nth-child(4) { animation-delay: 0.1s; }
.voice-wave.active span:nth-child(5) { animation-delay: 0s; }
@keyframes waveAnimation { 0%, 100% { height: 12px; } 50% { height: 35px; } }

/* 채팅 메시지 & 컨트롤 */
.chat-messages { flex: 1; padding: 20px; overflow-y: auto; display: none; flex-direction: column; gap: 15px; min-height: 300px; }
.chat-messages.active { display: flex; }
.realtime-text { padding: 12px 20px; font-style: italic; color: var(--text-muted); background: rgba(124, 179, 66, 0.1); display: none; border-left: 3px solid var(--main-color); margin: 0 20px; border-radius: 0 8px 8px 0; }
.realtime-text.active { display: block; }
.chat-controls { display: flex; flex-direction: column; align-items: center; padding: 25px 20px; border-top: 1px solid var(--bg-soft); gap: 12px; background: var(--bg-card); }
.record-btn { width: 80px; height: 80px; border-radius: 50%; border: none; background: linear-gradient(145deg, var(--main-color), var(--main-color-dark)); color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; box-shadow: 0 6px 20px rgba(124, 179, 66, 0.4); }
.record-btn:hover { transform: scale(1.08); box-shadow: 0 8px 25px rgba(124, 179, 66, 0.5); }
.record-btn.recording { background: linear-gradient(145deg, var(--danger), #c62828); animation: recordPulse 1.5s ease infinite; }
@keyframes recordPulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(239, 83, 80, 0.6); } 50% { box-shadow: 0 0 0 20px rgba(239, 83, 80, 0); } }
.record-btn .material-icons-round { font-size: 36px; }
.record-hint { font-size: 0.9rem; color: var(--text-muted); font-weight: 500; }

/* 오른쪽: 분석 영역 */
.analysis-section { display: flex; flex-direction: column; gap: 20px; }
.analysis-card { background: var(--bg-card); border-radius: var(--radius); box-shadow: var(--shadow-sm); overflow: hidden; }
.analysis-card .card-header { padding: 18px 20px; border-bottom: 1px solid rgba(0,0,0,0.05); background: var(--bg-card); }
.analysis-content { padding: 16px; display: flex; flex-direction: column; gap: 12px; }
.analysis-item { display: flex; align-items: center; gap: 14px; padding: 14px 16px; background: var(--bg-cream); border-radius: 12px; border: 1px solid rgba(124, 179, 66, 0.1); transition: all 0.2s; }
.analysis-item:hover { border-color: var(--main-color-light); background: white; }
.analysis-icon { width: 42px; height: 42px; display: flex; align-items: center; justify-content: center; background: linear-gradient(145deg, var(--main-color-light), var(--main-color)); border-radius: 10px; color: white; }
.analysis-icon .material-icons-round { font-size: 22px; }
.analysis-info { flex: 1; display: flex; flex-direction: column; gap: 2px; }
.analysis-label { font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }
.analysis-value { font-size: 1rem; font-weight: 600; color: var(--text-primary); }

/* 대화 통계 */
.conversation-stats { display: flex; justify-content: space-around; padding: 24px 16px; gap: 10px; }
.stat-item { text-align: center; flex: 1; padding: 16px 10px; background: var(--bg-cream); border-radius: 12px; transition: all 0.2s; }
.stat-item:hover { background: white; box-shadow: var(--shadow-sm); }
.stat-icon { font-size: 24px; color: var(--main-color); margin-bottom: 8px; }
.stat-number { display: block; font-size: 1.6rem; font-weight: 700; color: var(--main-color-dark); margin-bottom: 4px; }
.stat-label { font-size: 0.75rem; color: var(--text-muted); }

/* 반응형 */
@media (max-width: 1024px) {
    .bomi-chat-container { grid-template-columns: 1fr; gap: 20px; }
    .chat-empty-state { padding: 30px 20px; }
    .chat-empty-state .bomi-avatar img { width: 100px; }
}

/* ========================================
   프로그레스 바 컨테이너
======================================== */
.progress-container {
    position: fixed;
    top: 70px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 9999;
    width: 90%;
    max-width: 600px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    padding: 20px;
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* ========================================
   프로그레스 바 래퍼
======================================== */
.progress-bar-wrapper {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* ========================================
   프로그레스 바 (배경)
======================================== */
.progress-bar {
    width: 100%;
    height: 8px;
    background: #E0E0E0;
    border-radius: 10px;
    overflow: hidden;
    position: relative;
}

/* ========================================
   프로그레스 바 (채움)
======================================== */
.progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #4CAF50, #66BB6A);
    border-radius: 10px;
    transition: width 0.5s ease, background-color 0.3s ease;
    position: relative;
    
    /* 애니메이션 효과 */
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

/* ========================================
   진행 텍스트
======================================== */
.progress-text {
    text-align: center;
    font-size: 1rem;
    font-weight: 600;
    color: #666;
    transition: color 0.3s ease;
}

/* ========================================
   모바일 반응형
======================================== */
@media (max-width: 768px) {
    .progress-container {
        width: 95%;
        padding: 15px;
        top: 60px;
    }
    
    .progress-text {
        font-size: 0.9rem;
    }
    
    .progress-bar {
        height: 6px;
    }
}

/* ========================================
   실시간 텍스트 미리보기 강화
======================================== */
#realtime-text {
    padding: 15px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 12px;
    font-size: 1rem;
    text-align: center;
    margin: 15px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    animation: fadeIn 0.5s ease-in;
    font-weight: 500;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================================
   보미 상태 강화
======================================== */
#bomi-status {
    font-size: 1.1rem !important;
    font-weight: bold !important;
    padding: 10px 20px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

/* ========================================
   음성 웨이브 애니메이션 강화 (녹음 중)
======================================== */
.voice-wave.active span {
    animation: wave 1.2s ease-in-out infinite;
}

.voice-wave span:nth-child(1) { animation-delay: 0s; }
.voice-wave span:nth-child(2) { animation-delay: 0.1s; }
.voice-wave span:nth-child(3) { animation-delay: 0.2s; }
.voice-wave span:nth-child(4) { animation-delay: 0.3s; }
.voice-wave span:nth-child(5) { animation-delay: 0.4s; }

@keyframes wave {
    0%, 100% {
        transform: scaleY(1);
        background: #4CAF50;
    }
    50% {
        transform: scaleY(2);
        background: #66BB6A;
    }
}